<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maria Lê Nhật Linh</title>
    <link rel="stylesheet" href="../style.css" >
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
	<style>
        iframe {
            width: 600px;
            height: 400px;
            border: none;
            margin-bottom: 10px;
        }
        .controls {
            margin-top: 10px;
        }
        .controls button {
            padding: 10px;
            font-size: 16px;
            margin: 5px;
        }
    </style>
</head>


<body>
    <div class="profile-container">
        <div class="profile-header">
			<img src="../hinh/8.png" alt="Lê Nhật Linh" style="width: 150px; height: 150px; border-radius: 50%; margin-bottom: 10px; object-fit: cover;">
		</div>
        <div class="profile-details">
            <ul class="skills">
				<li>Maria</li>
                <li>Lê Nhật Linh</li>
				<li>Ban Truyền Thông</li>                
            </ul>
        </div>
        <div class="biography">
            <h2>Hình Ành Sa Mạc horeb 101:</h2>
           <h1>Google Drive Image Slideshow</h1>
	    <iframe id="slideshow" src="" frameborder="0"></iframe>
	    
	    <div class="controls">
	        <button onclick="previousImage()">Previous</button>
	        <button onclick="playSlideshow()">Play</button>
	        <button onclick="pauseSlideshow()">Pause</button>
	        <button onclick="nextImage()">Next</button>
	    </div>
        </div>
	    
    </div>
<script>
        // Thay bằng Folder ID công khai và API Key của bạn
        const FOLDER_ID = '1A04b1UYYuE37cMCKAC6uuFwG2nm8T8A2';
        const API_KEY = 'AIzaSyBvJic-X8DdTAy1_arZTL_0LH2lZ0iKcGU';

        let images = [];
        let currentIndex = 0;
        let intervalId;

        const iframe = document.getElementById('slideshow');

        // Hàm để lấy danh sách hình ảnh từ thư mục Google Drive chia sẻ công khai
        function fetchImagesFromDrive() {
            const url = `https://www.googleapis.com/drive/v3/files?q='${FOLDER_ID}'+in+parents&key=${API_KEY}&fields=files(id,name,mimeType)&supportsAllDrives=true`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Lọc chỉ lấy các file là hình ảnh (jpg, png)
                    images = data.files
                        .filter(file => file.mimeType.startsWith('image/'))
                        .map(file => `https://drive.google.com/uc?export=view&id=${file.id}`);
                    
                    if (images.length > 0) {
                        // Hiển thị hình ảnh đầu tiên và tự động play
                        showImage(currentIndex);
                        playSlideshow();
                    } else {
                        alert("Không tìm thấy hình ảnh trong thư mục.");
                    }
                })
                .catch(err => {
                    console.error('Error fetching images:', err);
                });
        }

        function showImage(index) {
            iframe.src = images[index];
        }

        function nextImage() {
            currentIndex = (currentIndex + 1) % images.length;
            showImage(currentIndex);
        }

        function previousImage() {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            showImage(currentIndex);
        }

        function playSlideshow() {
            intervalId = setInterval(nextImage, 2000); // Tự động chuyển ảnh sau 2 giây
        }

        function pauseSlideshow() {
            clearInterval(intervalId);
        }

        // Gọi hàm lấy danh sách hình ảnh và auto-play khi trang được tải
        fetchImagesFromDrive();
    </script>

   
</body>

</html>
